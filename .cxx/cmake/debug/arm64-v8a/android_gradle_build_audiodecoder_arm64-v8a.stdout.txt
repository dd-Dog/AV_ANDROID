[1/4] Building CXX object CMakeFiles/audiodecoder.dir/src/main/cpp/mp3decoder_controller.cpp.o
[2/4] Building CXX object CMakeFiles/audiodecoder.dir/src/main/cpp/Mp3Decoder.cpp.o
[3/4] Building CXX object CMakeFiles/audiodecoder.dir/src/main/cpp/ffmpegmp3decoder.cpp.o
G:\NDKProject\Mp3Encoder\src\main\cpp\Mp3Decoder.cpp:24:1: warning: control reaches end of non-void function [-Wreturn-type]
}
^
1 warning generated.
G:\NDKProject\Mp3Encoder\src\main\cpp\ffmpegmp3decoder.cpp:28:5: warning: 'av_register_all' is deprecated [-Wdeprecated-declarations]
    av_register_all();
    ^
../../../../src/main/cpp/include/libavformat/avformat.h:2024:1: note: 'av_register_all' has been explicitly marked deprecated here
attribute_deprecated
^
../../../../src/main/cpp/include\libavutil/attributes.h:94:49: note: expanded from macro 'attribute_deprecated'
#    define attribute_deprecated __attribute__((deprecated))
                                                ^
G:\NDKProject\Mp3Encoder\src\main\cpp\ffmpegmp3decoder.cpp:51:43: warning: 'codec' is deprecated [-Wdeprecated-declarations]
        if (AVMEDIA_TYPE_VIDEO == stream->codec->codec_type) {
                                          ^
../../../../src/main/cpp/include/libavformat/avformat.h:876:5: note: 'codec' has been explicitly marked deprecated here
    attribute_deprecated
    ^
../../../../src/main/cpp/include\libavutil/attributes.h:94:49: note: expanded from macro 'attribute_deprecated'
#    define attribute_deprecated __attribute__((deprecated))
                                                ^
G:\NDKProject\Mp3Encoder\src\main\cpp\ffmpegmp3decoder.cpp:54:50: warning: 'codec' is deprecated [-Wdeprecated-declarations]
        } else if (AVMEDIA_TYPE_AUDIO == stream->codec->codec_type) {
                                                 ^
../../../../src/main/cpp/include/libavformat/avformat.h:876:5: note: 'codec' has been explicitly marked deprecated here
    attribute_deprecated
    ^
../../../../src/main/cpp/include\libavutil/attributes.h:94:49: note: expanded from macro 'attribute_deprecated'
#    define attribute_deprecated __attribute__((deprecated))
                                                ^
G:\NDKProject\Mp3Encoder\src\main\cpp\ffmpegmp3decoder.cpp:70:63: warning: 'codec' is deprecated [-Wdeprecated-declarations]
    audioCodecCtx = formatContext->streams[audioStreamIndex]->codec;
                                                              ^
../../../../src/main/cpp/include/libavformat/avformat.h:876:5: note: 'codec' has been explicitly marked deprecated here
    attribute_deprecated
    ^
../../../../src/main/cpp/include\libavutil/attributes.h:94:49: note: expanded from macro 'attribute_deprecated'
#    define attribute_deprecated __attribute__((deprecated))
                                                ^
G:\NDKProject\Mp3Encoder\src\main\cpp\ffmpegmp3decoder.cpp:73:27: warning: 'codec' is deprecated [-Wdeprecated-declarations]
    else if (audioStream->codec->time_base.den && audioStream->codec->time_base.num)
                          ^
../../../../src/main/cpp/include/libavformat/avformat.h:876:5: note: 'codec' has been explicitly marked deprecated here
    attribute_deprecated
    ^
../../../../src/main/cpp/include\libavutil/attributes.h:94:49: note: expanded from macro 'attribute_deprecated'
#    define attribute_deprecated __attribute__((deprecated))
                                                ^
G:\NDKProject\Mp3Encoder\src\main\cpp\ffmpegmp3decoder.cpp:73:64: warning: 'codec' is deprecated [-Wdeprecated-declarations]
    else if (audioStream->codec->time_base.den && audioStream->codec->time_base.num)
                                                               ^
../../../../src/main/cpp/include/libavformat/avformat.h:876:5: note: 'codec' has been explicitly marked deprecated here
    attribute_deprecated
    ^
../../../../src/main/cpp/include\libavutil/attributes.h:94:49: note: expanded from macro 'attribute_deprecated'
#    define attribute_deprecated __attribute__((deprecated))
                                                ^
G:\NDKProject\Mp3Encoder\src\main\cpp\ffmpegmp3decoder.cpp:74:40: warning: 'codec' is deprecated [-Wdeprecated-declarations]
        timeBase = av_q2d(audioStream->codec->time_base);
                                       ^
../../../../src/main/cpp/include/libavformat/avformat.h:876:5: note: 'codec' has been explicitly marked deprecated here
    attribute_deprecated
    ^
../../../../src/main/cpp/include\libavutil/attributes.h:94:49: note: expanded from macro 'attribute_deprecated'
#    define attribute_deprecated __attribute__((deprecated))
                                                ^
G:\NDKProject\Mp3Encoder\src\main\cpp\ffmpegmp3decoder.cpp:92:63: warning: 'codec' is deprecated [-Wdeprecated-declarations]
    videoCodexCtx = formatContext->streams[videoStreamIndex]->codec;
                                                              ^
../../../../src/main/cpp/include/libavformat/avformat.h:876:5: note: 'codec' has been explicitly marked deprecated here
    attribute_deprecated
    ^
../../../../src/main/cpp/include\libavutil/attributes.h:94:49: note: expanded from macro 'attribute_deprecated'
#    define attribute_deprecated __attribute__((deprecated))
                                                ^
G:\NDKProject\Mp3Encoder\src\main\cpp\ffmpegmp3decoder.cpp:130:25: warning: 'avpicture_alloc' is deprecated [-Wdeprecated-declarations]
    bool pictureValid = avpicture_alloc(&picture,
                        ^
../../../../src/main/cpp/include\libavcodec/avcodec.h:5406:1: note: 'avpicture_alloc' has been explicitly marked deprecated here
attribute_deprecated
^
../../../../src/main/cpp/include\libavutil/attributes.h:94:49: note: expanded from macro 'attribute_deprecated'
#    define attribute_deprecated __attribute__((deprecated))
                                                ^
G:\NDKProject\Mp3Encoder\src\main\cpp\ffmpegmp3decoder.cpp:148:1: warning: control may reach end of non-void function [-Wreturn-type]
}
^
G:\NDKProject\Mp3Encoder\src\main\cpp\ffmpegmp3decoder.cpp:158:1: warning: control reaches end of non-void function [-Wreturn-type]
}
^
G:\NDKProject\Mp3Encoder\src\main\cpp\ffmpegmp3decoder.cpp:226:31: warning: using the result of an assignment as a condition without parentheses [-Wparentheses]
        if (packetStreamIndex = videoStreamIndex) {
            ~~~~~~~~~~~~~~~~~~^~~~~~~~~~~~~~~~~~
G:\NDKProject\Mp3Encoder\src\main\cpp\ffmpegmp3decoder.cpp:226:31: note: place parentheses around the assignment to silence this warning
        if (packetStreamIndex = videoStreamIndex) {
                              ^
            (                                   )
G:\NDKProject\Mp3Encoder\src\main\cpp\ffmpegmp3decoder.cpp:226:31: note: use '==' to turn this assignment into an equality comparison
        if (packetStreamIndex = videoStreamIndex) {
                              ^
                              ==
G:\NDKProject\Mp3Encoder\src\main\cpp\ffmpegmp3decoder.cpp:228:23: warning: 'avcodec_decode_video2' is deprecated [-Wdeprecated-declarations]
            int len = avcodec_decode_video2(videoCodexCtx, videoFrame, &gotFrame, &avPacket);
                      ^
../../../../src/main/cpp/include\libavcodec/avcodec.h:4754:1: note: 'avcodec_decode_video2' has been explicitly marked deprecated here
attribute_deprecated
^
../../../../src/main/cpp/include\libavutil/attributes.h:94:49: note: expanded from macro 'attribute_deprecated'
#    define attribute_deprecated __attribute__((deprecated))
                                                ^
G:\NDKProject\Mp3Encoder\src\main\cpp\ffmpegmp3decoder.cpp:239:23: warning: 'avcodec_decode_audio4' is deprecated [-Wdeprecated-declarations]
            int len = avcodec_decode_audio4(audioCodecCtx, audioFrame, &gotFrame, &avPacket);
                      ^
../../../../src/main/cpp/include\libavcodec/avcodec.h:4705:1: note: 'avcodec_decode_audio4' has been explicitly marked deprecated here
attribute_deprecated
^
../../../../src/main/cpp/include\libavutil/attributes.h:94:49: note: expanded from macro 'attribute_deprecated'
#    define attribute_deprecated __attribute__((deprecated))
                                                ^
G:\NDKProject\Mp3Encoder\src\main\cpp\ffmpegmp3decoder.cpp:253:1: warning: control may reach end of non-void function [-Wreturn-type]
}
^
G:\NDKProject\Mp3Encoder\src\main\cpp\ffmpegmp3decoder.cpp:289:32: warning: 'av_frame_get_best_effort_timestamp' is deprecated [-Wdeprecated-declarations]
        float actualPosition = av_frame_get_best_effort_timestamp(audioFrame) * timeBase;
                               ^
../../../../src/main/cpp/include\libavutil/frame.h:604:1: note: 'av_frame_get_best_effort_timestamp' has been explicitly marked deprecated here
attribute_deprecated
^
../../../../src/main/cpp/include\libavutil/attributes.h:94:49: note: expanded from macro 'attribute_deprecated'
#    define attribute_deprecated __attribute__((deprecated))
                                                ^
G:\NDKProject\Mp3Encoder\src\main\cpp\ffmpegmp3decoder.cpp:293:16: warning: 'av_frame_get_pkt_duration' is deprecated [-Wdeprecated-declarations]
    duration = av_frame_get_pkt_duration(audioFrame) * timeBase;
               ^
../../../../src/main/cpp/include\libavutil/frame.h:608:1: note: 'av_frame_get_pkt_duration' has been explicitly marked deprecated here
attribute_deprecated
^
../../../../src/main/cpp/include\libavutil/attributes.h:94:49: note: expanded from macro 'attribute_deprecated'
#    define attribute_deprecated __attribute__((deprecated))
                                                ^
G:\NDKProject\Mp3Encoder\src\main\cpp\ffmpegmp3decoder.cpp:295:13: warning: 'av_frame_get_best_effort_timestamp' is deprecated [-Wdeprecated-declarations]
            av_frame_get_best_effort_timestamp(audioFrame) * timeBase - firstFrameCorrectionInSecs;
            ^
../../../../src/main/cpp/include\libavutil/frame.h:604:1: note: 'av_frame_get_best_effort_timestamp' has been explicitly marked deprecated here
attribute_deprecated
^
../../../../src/main/cpp/include\libavutil/attributes.h:94:49: note: expanded from macro 'attribute_deprecated'
#    define attribute_deprecated __attribute__((deprecated))
                                                ^
G:\NDKProject\Mp3Encoder\src\main\cpp\ffmpegmp3decoder.cpp:300:1: warning: control may reach end of non-void function [-Wreturn-type]
}
^
G:\NDKProject\Mp3Encoder\src\main\cpp\ffmpegmp3decoder.cpp:344:9: warning: 'avpicture_free' is deprecated [-Wdeprecated-declarations]
        avpicture_free(&picture);
        ^
../../../../src/main/cpp/include\libavcodec/avcodec.h:5412:1: note: 'avpicture_free' has been explicitly marked deprecated here
attribute_deprecated
^
../../../../src/main/cpp/include\libavutil/attributes.h:94:49: note: expanded from macro 'attribute_deprecated'
#    define attribute_deprecated __attribute__((deprecated))
                                                ^
20 warnings generated.
[4/4] Linking CXX shared library ..\..\..\..\build\intermediates\cmake\debug\obj\arm64-v8a\libaudiodecoder.so
FAILED: cmd.exe /C "cd . && D:\Android\Sdk\ndk-bundle\toolchains\llvm\prebuilt\windows-x86_64\bin\clang++.exe  --target=aarch64-none-linux-android --gcc-toolchain=D:/Android/Sdk/ndk-bundle/toolchains/aarch64-linux-android-4.9/prebuilt/windows-x86_64 --sysroot=D:/Android/Sdk/ndk-bundle/sysroot -fPIC -isystem D:/Android/Sdk/ndk-bundle/sysroot/usr/include/aarch64-linux-android -D__ANDROID_API__=21 -g -DANDROID -ffunction-sections -funwind-tables -fstack-protector-strong -no-canonical-prefixes -Wa,--noexecstack -Wformat -Werror=format-security -std=c++11  -frtti -fexceptions -std=c++11 -O0 -fno-limit-debug-info  -Wl,--exclude-libs,libgcc.a -Wl,--exclude-libs,libatomic.a -nostdlib++ --sysroot D:/Android/Sdk/ndk-bundle/platforms/android-21/arch-arm64 -Wl,--build-id -Wl,--warn-shared-textrel -Wl,--fatal-warnings -LD:/Android/Sdk/ndk-bundle/sources/cxx-stl/llvm-libc++/libs/arm64-v8a -Wl,--no-undefined -Wl,-z,noexecstack -Qunused-arguments -Wl,-z,relro -Wl,-z,now -shared -Wl,-soname,libaudiodecoder.so -o ..\..\..\..\build\intermediates\cmake\debug\obj\arm64-v8a\libaudiodecoder.so CMakeFiles/audiodecoder.dir/src/main/cpp/Mp3Decoder.cpp.o CMakeFiles/audiodecoder.dir/src/main/cpp/ffmpegmp3decoder.cpp.o CMakeFiles/audiodecoder.dir/src/main/cpp/mp3decoder_controller.cpp.o  -lz ../../../../libs//libavformat.a ../../../../libs//libavdevice.a ../../../../libs//libavfilter.a ../../../../libs//libavcodec.a ../../../../libs//libavutil.a ../../../../libs//libswresample.a ../../../../libs//libswscale.a -llog -latomic -lm "D:/Android/Sdk/ndk-bundle/sources/cxx-stl/llvm-libc++/libs/arm64-v8a/libc++_static.a" "D:/Android/Sdk/ndk-bundle/sources/cxx-stl/llvm-libc++/libs/arm64-v8a/libc++abi.a" && cd ."
../../../../libs//libavformat.a: error adding symbols: File in wrong format
clang++.exe: error: linker command failed with exit code 1 (use -v to see invocation)
ninja: build stopped: subcommand failed.
